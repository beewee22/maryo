(function(e){function r(r){for(var s,a,o=r[0],p=r[1],c=r[2],u=0,_=[];u<o.length;u++)a=o[u],n[a]&&_.push(n[a][0]),n[a]=0;for(s in p)Object.prototype.hasOwnProperty.call(p,s)&&(e[s]=p[s]);l&&l(r);while(_.length)_.shift()();return i.push.apply(i,c||[]),t()}function t(){for(var e,r=0;r<i.length;r++){for(var t=i[r],s=!0,o=1;o<t.length;o++){var p=t[o];0!==n[p]&&(s=!1)}s&&(i.splice(r--,1),e=a(a.s=t[0]))}return e}var s={},n={app:0},i=[];function a(r){if(s[r])return s[r].exports;var t=s[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=s,a.d=function(e,r,t){a.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,r){if(1&r&&(e=a(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)a.d(t,s,function(r){return e[r]}.bind(null,s));return t},a.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(r,"a",r),r},a.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],p=o.push.bind(o);o.push=r,o=o.slice();for(var c=0;c<o.length;c++)r(o[c]);var l=p;i.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},"034f":function(e,r,t){"use strict";var s=t("64a9"),n=t.n(s);n.a},"06c4":function(e,r,t){"use strict";var s=t("14da"),n=t.n(s);n.a},"14da":function(e,r,t){},"24d8":function(e){e.exports=[{name:"repo",type:"git",source:{uri:"((repo_uri_temp))",branch:"((repo_branch_temp))",private_key:"((git_private_key))"},check_every:"10s"},{name:"target_repo",type:"git",source:{uri:"((repo_uri_temp))",branch:"((repo_branch_temp))",private_key:"((git_private_key))"},check_every:"10s"},{name:"fail_api",type:"http-api",source:{uri:"((fail_callback_uri_temp))&job=deploy-develop",method:"POST"},check_every:"10s"},{name:"success_api",type:"http-api",source:{uri:"((success_callback_uri_temp))&job=deploy-develop",method:"POST"},check_every:"10s"},{name:"cf_api",type:"cf",source:{api:"((cf_api_temp))",username:"((cf_username))",password:"((cf_password))",organization:"((cf_org_temp))",space:"((cf_space_temp))",skip_cert_check:!0,check_every:"10s"}},{name:"docker_registry",type:"docker-image",source:{repository:"((docker_harbor_repo))/((image_project_temp))/((wrapper_group_name))-((wrapper_project_code_lower))",tag:"((ticket_version))",insecure_registries:"((insecure_registries))",username:"((docker_harbor_username))",password:"((docker_harbor_password))",check_every:"10s"}},{name:"docker_registry_rollback",type:"docker-image",source:{repository:"((docker_harbor_repo))/((image_project_temp))/((wrapper_group_name))-((wrapper_project_code_lower))",tag:"((rollback_version))",insecure_registries:"((insecure_registries))",username:"((docker_harbor_username))",password:"((docker_harbor_password))"}},{name:"cf-delete",type:"cf-cli-resource",source:{api:"((cf_api_temp))",username:"((cf_username))",password:"((cf_password))",org:"((cf_org_temp))",space:"((cf_space_temp))",cf_dial_timeout:10}}]},3139:function(e){e.exports=[{name:"fail_api",type:"http-api",source:{uri:"((fail_callback_uri_temp))&job=deploy-develop",method:"POST"},check_every:"10s"},{name:"success_api",type:"http-api",source:{uri:"((success_callback_uri_temp))&job=stg-merge",method:"POST"},check_every:"10s"},{name:"repo",type:"git",source:{uri:"((repo_uri_temp))",branch:"((repo_branch_temp))",private_key:"((git_private_key))"},check_every:"10s"},{name:"target_repo",type:"git",source:{uri:"((repo_uri_temp))",branch:"((repo_branch_temp))",private_key:"((git_private_key))"},check_every:"10s"},{name:"cf_api",type:"cf",source:{api:"((cf_api_temp))",username:"((cf_username))",password:"((cf_password))",organization:"((cf_org_temp))",space:"((cf_space_temp))",skip_cert_check:!0,check_every:"10s"}},{name:"mvnw",type:"git",source:{uri:"((mvnw_git_url_temp))",branch:"master",private_key:"((git_private_key_temp))"},check_every:"10s"},{name:"m2",type:"docker-image",source:{repository:"making/m2"},check_every:"10s"},{name:"docker-registry",type:"docker-image",source:{repository:"((docker_harbor_repo))/((image_project_dev))/((wrapper_group_name))-((wrapper_project_code_lower))",tag:"((ticket_version))",insecure_registries:"((insecure_registries))",username:"((docker_harbor_username))",password:"((docker_harbor_password))"}},{name:"cf-delete",type:"cf-cli-resource",source:{api:"((cf_api_temp))",username:"((cf_username))",password:"((cf_password))",org:"((cf_org_temp))",space:"((cf_space_temp))"}}]},3488:function(e){e.exports=[{name:"build_test",serial:!0,public:!0,plan:[{aggregate:[{get:"repo",resource:"repo"}]},{task:"unit",config:{platform:"linux",image_resource:{type:"docker-image",source:{repository:"node",tag:"lts-alpine"}},inputs:[{name:"repo"}],run:{path:"/bin/sh",args:["-c",""]}},on_failure:{put:"fail_api"}}]},{name:"build&deploy",serial:!0,public:!1,plan:[{aggregate:[{get:"repo",resource:"repo"}]},{task:"build",config:{platform:"linux",image_resource:{type:"docker-image",source:{repository:"node",tag:"12.2.0-alpine"}},inputs:[{name:"repo"}],outputs:[{name:"output"}],params:{repo:"repo",cf_org_dev:"((cf_org_dev))",image_project:"((image_project_dev))",image_name:"((wrapper_group_name))-((wrapper_project_code_lower))",image_tag:"((ticket_version))"},run:{path:"/bin/sh",args:["-c",'cp -r $repo/* output\ncd $repo\nls -al ../output\ncat << EOF >> Dockerfile\nFROM node:lts-alpine\nRUN npm install -g http-server\nWORKDIR /app\nCOPY package*.json ./\nRUN npm i terser@4.0.0\nRUN npm install\nCOPY . .\nRUN npm run build -- --mode $cf_org_dev\nEXPOSE 8080\nCMD [ "http-server", "dist" ]\nEOF\nls ../output/\ncp Dockerfile ../output/Dockerfile\ncat <<EOF >> manifest.yml\napplications:\n- memory: 1024M\n docker:\n image: registry.mzdev.kr/$image_project/$image_name:$image_tag\n command: \nEOF\ncp manifest.yml ../output/\nls -al ../output/\n']}},on_failure:{put:"fail_api"}},{put:"docker_registry",params:{build:"output/"},on_failure:{put:"fail_api"}},{put:"cf_api",params:{manifest:"output/manifest.yml",current_app_name:"((wrapper_group_name))-((wrapper_ticket_number))"},on_success:{put:"success_api"},on_failure:{put:"fail_api"}}]},{name:"pipline-pause",serial:!0,public:!0,plan:[{aggregate:[{get:"cf_api",resource:"cf_api"},{get:"repo",resource:"repo"}]}]},{name:"merge-to-git",public:!0,plan:[{aggregate:[{get:"repo",resource:"repo"},{get:"repo-release",resource:"target_repo"}]},{task:"merge-to-git",config:{platform:"linux",image_resource:{type:"docker-image",source:{repository:"getourneau/alpine-bash-git"}},inputs:[{name:"from",path:"repo"},{name:"to",path:"repo-target"}],outputs:[{name:"out"}],run:{path:"/bin/bash",args:["-c",'if [ "$DEBUG" = "true" ]; then\nset -x\nfi\ngit config --global user.email "${GIT_EMAIL}"\ngit config --global user.name "${GIT_NAME}"\ncd out\nshopt -s dotglob\nrm -rf *\nmv -f ../repo/* ./\nGIT_SSH_COMMAND="ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no" git remote add -f repo-target ../repo-target\ngit merge -s ours "repo-target/release" -m "$group-$code-$version merge to release"\n']}},input_mapping:{from:"repo",to:"repo-release"},params:{GIT_EMAIL:"((git_email))",GIT_NAME:"((git_name))",group:"((wrapper_group_name))",code:"((wrapper_project_code))",version:"((ticket_version))"},on_failure:{put:"fail_api"}},{put:"repo",resource:"target_repo",params:{repository:"out"},on_failure:{put:"fail_api"}}]},[{name:"roll-back",serial:!0,public:!0,plan:[{aggregate:[{get:"repo",resource:"target_repo"},{get:"docker-registry-rollback",resource:"docker_registry_rollback",trigger:!1}]},{task:"build",config:{platform:"linux",image_resource:{type:"docker-image",source:{repository:"node",tag:"12.2.0-alpine"}},inputs:[{name:"repo"}],outputs:[{name:"output"}],params:{image_project:"((image_project_rel))",image_name:"((wrapper_group_name))-((wrapper_project_code_lower))",image_tag:"((rollback_version))"},run:{path:"/bin/sh",args:["-c","cd repo\ncat <<EOF >> manifest.yml\napplications:\n- memory: 1024M\n docker:\n image: registry.mzdev.kr/$image_project/$image_name:$image_tag\n command: \nEOF\ncp manifest.yml ../output/\nls ../output/\n"]}},on_failure:{put:"fail_api"}},{put:"docker_registry_rollback",params:{manifest:"output/manifest.yml",current_app_name:"((wrapper_group_name))-((wrapper_project_code))"},on_success:{put:"success_api"},on_failure:{put:"fail_api"}}]},{name:"close",serial:!0,public:!0,plan:[{aggregate:[{get:"repo",resource:"repo"},{get:"cf-prod",resource:"cf_api"}]}]}]]},"56d7":function(e,r,t){"use strict";t.r(r);t("14c6"),t("08c1"),t("4842"),t("d9fc");var s=t("2b0e"),n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],a=(t("034f"),t("2877")),o={},p=Object(a["a"])(o,n,i,!1,null,null,null),c=p.exports,l=t("8c4f"),u=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"hello"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(r){return e.$refs.inputUpload.click()}}},[e._v("YML Upload")]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputUpload",attrs:{type:"file"},on:{change:e.previewFiles}})])},_=[],g=t("651e"),m=t.n(g),d={name:"pipeline_input",props:{msg:String},data:function(){return{files:[],pipeline_yml:""}},methods:{previewFiles:function(e){this.files=this.$refs.inputUpload.files[0];var r=e.target,t=new FileReader,s=this;t.onload=function(){var e=t.result;this.pipeline_yml=m.a.load(e),s.$router.push({name:"pipeline_mgmt",params:{pipeline_yml:this.pipeline_yml}})},t.readAsText(r.files[0])}}},h=d,f=Object(a["a"])(h,u,_,!1,null,null,null),b=f.exports,v=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("h1",[e._v("\n\t\t\tRESOURCES\n\t\t")]),t("h2",{staticStyle:{display:"inline-block"}},e._l(e.pipeline_resources,function(r,s){return t("b-badge",{key:s,staticClass:"resourcePosition",staticStyle:{cursor:"pointer"},attrs:{variant:"success",item:r},on:{click:function(r){return e.resource_info(s)}}},[e._v(e._s(r.name))])}),1),t("br"),t("h1",[e._v("\n\t\t\tADD RESOURCES\n\t\t")]),t("h2",[e._l(e.add_resources,function(r,s){return t("b-badge",{key:s,staticClass:"resourcePosition",staticStyle:{cursor:"pointer"},attrs:{variant:"primary",item:r},on:{click:function(r){return e.resource_info(s)}}},[e._v(e._s(r.name))])}),t("b-badge",{staticClass:"resourcePosition",staticStyle:{cursor:"pointer"},attrs:{variant:"primary"},on:{click:e.add_resource}},[e._v("ADD RESOURCE +")]),t("b-badge",{staticClass:"resourcePosition",staticStyle:{cursor:"pointer"},attrs:{variant:"danger"},on:{click:e.add_resource_delete}},[e._v("ALL DELETE")])],2),t("h1",{staticClass:"topGrayLine"},[e._v(" \n\t\t\tPIPE LINE\n\t\t")]),t("draggable",{attrs:{"ghost-class":"ghost",group:"pipeline"},on:{start:function(r){e.drag=!0},end:e.job_change},model:{value:e.pipeline_jobs,callback:function(r){e.pipeline_jobs=r},expression:"pipeline_jobs"}},e._l(e.pipeline_jobs,function(r,s){return t("div",{key:s,staticStyle:{float:"left",position:"relative",cursor:"pointer"},on:{mouseover:function(r){return e.job_mouseover(s)},mouseleave:function(r){return e.job_mouseleave(s)}}},[r.length>1?t("div",[t("div",{staticStyle:{width:"140px",height:"50px"}},[0!=s?t("div",{staticClass:"splitLineSize",style:(e.passed_pipeline[s][0],"border:3px solid green;")}):e._e(),t("div",{staticClass:"splitBoxSize",on:{click:function(r){return e.showInfo(s)}}},[t("br"),e._v(e._s(r[0].name)+"\n\t\t\t\t\t\t")]),0!=s?t("div",{staticClass:"splitLineSize",style:(e.passed_pipeline[s][1],"border:3px solid green;")}):e._e(),t("div",{staticClass:"splitBoxSize",on:{click:function(r){return e.showInfo(s)}}},[t("br"),e._v(e._s(r[1].name)+"\n\t\t\t\t\t\t")])])]):t("div",[0!=s?t("div",{staticClass:"fullLineSize",style:(e.passed_pipeline[s],"border:3px solid green;")}):e._e(),t("div",{staticClass:"fullBoxSize",on:{click:function(r){return e.showInfo(s)}}},[t("br"),e._v(e._s(r.name)+"\n\t\t\t\t\t")])]),s==e.deleteIndex?t("b-badge",{staticClass:"jobDelete",attrs:{variant:"danger"},on:{click:function(r){return e.delete_job(s)}}},[e._v("Delete")]):e._e()],1)}),0),t("div",{staticClass:"addBoxSize",on:{click:e.add_pipeline}},[t("br"),t("br"),e._v("+\n\t\t")]),t("button",{staticClass:"btn btn-primary",staticStyle:{float:"right"},attrs:{type:"button"},on:{click:e.exportYml}},[e._v("export data")]),t("b-modal",{attrs:{title:"Job","hide-footer":""},model:{value:e.pipeline_info_dialog,callback:function(r){e.pipeline_info_dialog=r},expression:"pipeline_info_dialog"}},[null!=e.job_backup.name?t("div",[t("h1",[e._v(e._s(e.job_backup.name))]),t("h2",[e._v("Aggregate")]),t("h3",e._l(e.job_backup.plan[0].aggregate,function(r){return t("div",{key:r.get},[t("b-badge",{staticStyle:{"margin-right":"15px"},attrs:{variant:"success"}},[e._v(e._s(r.get)+" : "+e._s(r.resource))]),t("br"),null!=r.passed?t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:r.passed,callback:function(t){e.$set(r,"passed",t)},expression:"item.passed"}},[t("b",[e._v("Passed: "+e._s(null!=r.passed?r.passed:"false"))])]):e._e(),t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:r.trigger,callback:function(t){e.$set(r,"trigger",t)},expression:"item.trigger"}},[t("b",[e._v("Trigger: "+e._s(null!=r.trigger?r.trigger:"false"))])])],1)}),0),e.job_backup.plan.length>1?t("div",[t("h2",[e._v("Image resource")]),t("h3",[e.job_backup.plan[1].config.image_resource.type?t("b-badge",{staticStyle:{"margin-right":"15px"},attrs:{variant:"success"}},[e._v("type : "+e._s(e.job_backup.plan[1].config.image_resource.type))]):e._e(),e._l(Object.keys(e.job_backup.plan[1].config.image_resource.source),function(r){return t("b-badge",{key:r,staticStyle:{"margin-right":"15px"},attrs:{variant:"success"}},[e._v(e._s(r)+" : "+e._s(e.job_backup.plan[1].config.image_resource.source[r]))])})],2),t("h2",[e._v("Run")]),t("b-form-textarea",{attrs:{id:"textarea",rows:"7",disabled:""},model:{value:e.job_backup.plan[1].config.run.args,callback:function(r){e.$set(e.job_backup.plan[1].config.run,"args",r)},expression:"job_backup.plan[1].config.run.args"}})],1):e._e(),t("h2",[e._v("Resources")]),e._l(e.job_backup.plan,function(r,s){return t("h3",{key:r.get},[0!=s&&1!=s?t("b-badge",{staticStyle:{"margin-right":"15px"},attrs:{variant:"success"}},[e._v(e._s(r.put))]):e._e()],1)})],2):e._l(e.job_backup,function(r){return t("div",[t("h1",[e._v(e._s(r.name))]),t("h3",[e._v("Aggregate")]),t("h4",e._l(r.plan[0].aggregate,function(r){return t("div",{key:r.get},[t("b-badge",{staticStyle:{"margin-right":"15px"},attrs:{variant:"success"}},[e._v(e._s(r.get)+" : "+e._s(r.resource))]),null!=r.passed?t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:r.passed,callback:function(t){e.$set(r,"passed",t)},expression:"item.passed"}},[t("b",[e._v("Passed: "+e._s(null!=r.passed?r.passed:"false"))])]):e._e(),t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:r.trigger,callback:function(t){e.$set(r,"trigger",t)},expression:"item.trigger"}},[t("b",[e._v("Trigger: "+e._s(null!=r.trigger?r.trigger:"false"))])])],1)}),0),r.plan.length>1?t("div",[t("h3",[e._v("Image resource")]),t("h4",[r.plan[1].config.image_resource.type?t("b-badge",{staticStyle:{"margin-right":"15px"},attrs:{variant:"success"}},[e._v("type : "+e._s(r.plan[1].config.image_resource.type))]):e._e(),e._l(Object.keys(r.plan[1].config.image_resource.source),function(s){return t("b-badge",{key:s,staticStyle:{"margin-right":"15px"},attrs:{variant:"success"}},[e._v(e._s(s)+" : "+e._s(r.plan[1].config.image_resource.source[s]))])})],2),t("h3",[e._v("Run")]),t("b-form-textarea",{attrs:{id:"textarea",rows:"7",disabled:""},model:{value:r.plan[1].config.run.args,callback:function(t){e.$set(r.plan[1].config.run,"args",t)},expression:"item.plan[1].config.run.args"}})],1):e._e(),t("h3",[e._v("Resources")]),e._l(r.plan,function(r,s){return t("h4",{key:r.get},[0!=s&&1!=s?t("b-badge",{staticStyle:{"margin-right":"15px"},attrs:{variant:"success"}},[e._v(e._s(r.put))]):e._e()],1)})],2)}),t("b-button",{staticClass:"mt-2",attrs:{variant:"outline-success",block:""},on:{click:function(r){return e.job_save(e.now_pipeline_index)}}},[e._v("SAVE")])],2),t("b-modal",{attrs:{title:"Resource","hide-footer":""},model:{value:e.resource_info_dialog,callback:function(r){e.resource_info_dialog=r},expression:"resource_info_dialog"}},[e._l(Object.keys(e.resource_backup),function(r){return t("div",["object"!=typeof e.resource_backup[r]?t("div",[t("h3",[e._v(e._s(r)+" :")]),t("b-form-input",{model:{value:e.resource_backup[r],callback:function(t){e.$set(e.resource_backup,r,t)},expression:"resource_backup[item]"}})],1):t("div",[t("h3",[e._v(e._s(r)+" : ")]),e._l(Object.keys(e.resource_backup[r]),function(s){return t("div",[t("h4",[e._v("    "+e._s(s)+" :")]),t("b-form-input",{model:{value:e.resource_backup[r][s],callback:function(t){e.$set(e.resource_backup[r],s,t)},expression:"resource_backup[item][item2]"}})],1)})],2)])}),t("b-button",{staticClass:"mt-2",attrs:{variant:"outline-success",block:""},on:{click:function(r){return e.change_resource()}}},[e._v("SAVE")])],2),t("b-modal",{attrs:{title:"Link","hide-footer":""},model:{value:e.link_dialog,callback:function(r){e.link_dialog=r},expression:"link_dialog"}},[e._l(e.passed_pipeline[e.passed_index],function(r,s){return t("div",{key:s},["object"==typeof r?t("div",[t("h2",[e._v(e._s(e.pipeline_jobs[e.passed_index][s].name))]),e._l(r,function(r,n){return t("div",{key:n},[t("br"),t("h5",[e._v(e._s(e.pipeline_jobs[e.passed_index][s].plan[0].aggregate[r].resource))]),t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.passed_check_double[s][n],callback:function(r){e.$set(e.passed_check_double[s],n,r)},expression:"passed_check_double[index][index2]"}},[t("b",[e._v("Passed: "+e._s(e.passed_check_double[s][n]?e.passed_check_double[s][n]:"false"))])]),t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.trigger_check_double[s][n],callback:function(r){e.$set(e.trigger_check_double[s],n,r)},expression:"trigger_check_double[index][index2]"}},[t("b",[e._v("Trigger: "+e._s(e.trigger_check_double[s][n]?e.trigger_check_double[s][n]:"false"))])])],1)})],2):"number"==typeof r?t("div",[0==s?t("h2",[e._v(e._s(e.pipeline_jobs[e.passed_index].name))]):e._e(),t("br"),t("h5",[e._v(e._s(e.pipeline_jobs[e.passed_index].plan[0].aggregate[r].resource))]),t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.passed_check[s],callback:function(r){e.$set(e.passed_check,s,r)},expression:"passed_check[index]"}},[t("b",[e._v("Passed: "+e._s(e.passed_check[s]?e.passed_check[s]:"false"))])]),t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.trigger_check[s],callback:function(r){e.$set(e.trigger_check,s,r)},expression:"trigger_check[index]"}},[t("b",[e._v("Trigger: "+e._s(e.trigger_check[s]?e.trigger_check[s]:"false"))])])],1):e._e()])}),t("b-button",{staticClass:"mt-2",attrs:{variant:"outline-success",block:""},on:{click:function(r){return e.save_pass(e.passed_index)}}},[e._v("SAVE")])],2)],1)},k=[],y=(t("55dd"),t("ac6a"),t("7618")),j=(t("7f7f"),t("310e")),w=t.n(j),x=(t("8241"),{name:"pipeline_mgmt",props:{msg:String},components:{draggable:w.a},data:function(){return{pipeline_yml:"",pipeline_jobs:"",pipeline_resources:"",add_resources:[],pipeline_name:"",load_pipeline_deck:[],checkBox:[],name_dialog:!1,resource_info_dialog:!1,pipeline_info_dialog:!1,resource_backup:"",job_backup:"",link_dialog:!1,now_pipeline_index:0,now_resource_index:0,passed_pipeline:[],passed_index:-1,deleteIndex:-1,passed_check:[],passed_check_double:[[],[]],trigger_check:[],trigger_check_double:[[],[]]}},watch:{pipeline_jobs:function(){}},created:function(){if(this.$route.params.pipeline_yml?(this.pipeline_yml=this.$route.params.pipeline_yml,localStorage.setItem("pipeline_json",JSON.stringify(this.pipeline_yml))):this.pipeline_yml=JSON.parse(localStorage.getItem("pipeline_json")),this.pipeline_jobs=this.pipeline_yml.jobs,this.pipeline_resources=this.pipeline_yml.resources,this.first_setting(),this.$route.params.add_data){for(var e=this.$route.params.add_data,r=e.resources.length-1;r>=0;r--)for(var t=0;t<this.pipeline_resources.length;t++)if(e.resources[r].name==this.pipeline_resources[t].name){e.resources.splice(r,1);break}this.pipeline_jobs.push(e.job);for(var s=0;s<e.resources.length;s++)this.pipeline_resources.push(e.resources[s])}"undefined"!==localStorage.getItem("add_resource_json")&&(this.add_resources=JSON.parse(localStorage.getItem("add_resource_json"))),this.$route.params.send_resource&&(this.add_resources.push(this.$route.params.send_resource),localStorage.setItem("add_resource_json",JSON.stringify(this.add_resources))),this.all_passed_reset()},methods:{first_setting:function(){for(var e="",r=0;r<this.pipeline_jobs.length;r++){var t=this.pipeline_jobs[r].plan[0];this.passed_pipeline[r]="";for(var s=0;s<t.aggregate.length;s++)null!=t.aggregate[s].passed&&(e==t.aggregate[s].passed[0]?(this.passed_pipeline[r-1]=["",""],this.pipeline_jobs[r-1]=[this.pipeline_jobs[r-1],this.pipeline_jobs[r]],this.pipeline_jobs.splice(r,1),r-=1):e=t.aggregate[s].passed[0])}},job_change:function(e){this.remove_resource_link(e.newIndex),this.remove_resource_link(e.newIndex+1),e.oldIndex>e.newIndex?this.remove_resource_link(e.oldIndex+1):this.remove_resource_link(e.oldIndex),this.all_passed_reset(),this.drag=!1},all_passed_reset:function(){for(var e=0;e<this.passed_pipeline.length;e++)this.passed_reset(e)},passed_reset:function(e){"object"==Object(y["a"])(this.pipeline_jobs[e-1])&&this.pipeline_jobs[e-1].length&&this.pipeline_jobs[e-1].length>1?this.passed_pipeline[e]=this.pipeline_passed_check(e,"before"):"object"==Object(y["a"])(this.pipeline_jobs[e])&&this.pipeline_jobs[e].length&&this.pipeline_jobs[e].length>1?this.passed_pipeline[e]=this.pipeline_passed_check(e,"after"):this.passed_pipeline[e]=this.pipeline_passed_check(e)},showInfo:function(e){if(this.now_pipeline_index=e,this.job_backup=JSON.parse(JSON.stringify(this.pipeline_jobs[this.now_pipeline_index])),this.job_backup.plan){for(var r=this.job_backup.plan[0].aggregate,t=0;t<r.length;t++)if("object"==Object(y["a"])(r[t].passed)&&r[t].passed.length>0)r[t].passed=!0;else if(delete r[t]["passed"],this.passed_pipeline[e])for(var s=0;s<this.passed_pipeline[e].length;s++)if(t===this.passed_pipeline[e][s]){r[t]["passed"]=!1;break}}else for(var n=0;n<this.job_backup.length;n++){r=this.job_backup[n].plan[0].aggregate;for(var i=0;i<r.length;i++)if("object"==Object(y["a"])(r[i].passed)&&r[i].passed.length>0)r[i].passed=!0;else if(delete r[i]["passed"],this.passed_pipeline[e].length)for(var a=0;a<this.passed_pipeline[e].length;a++)if(i==this.passed_pipeline[e][a]){r[i]["passed"]=!1;break}}this.pipeline_info_dialog=!0},job_save:function(e){if(this.job_backup.plan)for(var r=this.job_backup.plan[0].aggregate,t=0;t<r.length;t++)null==r[t].passed||1!=r[t].passed?null==r[t].passed||0!=r[t].passed||delete r[t]["passed"]:this.pipeline_jobs[e-1].name?(r[t].passed=[this.pipeline_jobs[e-1].name],console.log(this.pipeline_jobs[e-1].name)):r[t].passed=["close"];else for(var s=0;s<this.job_backup.length;s++){r=this.job_backup[s].plan[0].aggregate;for(var n=0;n<r.length;n++)r[n].passed&&1==r[n].passed?this.pipeline_jobs[e-1].name?r[n].passed=[this.pipeline_jobs[e-1].name]:r[n].passed=["close"]:r[n].passed&&0==r[n].passed&&delete r[n]["passed"]}this.pipeline_jobs[e]=JSON.parse(JSON.stringify(this.job_backup)),this.pipeline_info_dialog=!1},resource_info:function(e){this.now_resource_index=e,this.resource_backup=JSON.parse(JSON.stringify(this.pipeline_resources[this.now_resource_index])),this.resource_info_dialog=!0},change_resource:function(){this.pipeline_resources[this.now_resource_index]=JSON.parse(JSON.stringify(this.resource_backup)),this.resource_info_dialog=!1},exportYml:function(){this.now_pipeline_save();var e=JSON.parse(JSON.stringify(this.pipeline_yml)),r=this;console.log("rrrrr")(function(){var s,n=t("8241");s=n.stringify(e),console.log(s),r.$router.push({name:"export_pipeline",params:{export_pipeline:s}})}())},now_pipeline_save:function(){for(var e=0;e<this.pipeline_jobs.length;e++)"object"==Object(y["a"])(this.pipeline_jobs[e][0])&&this.pipeline_jobs.splice(e,1,this.pipeline_jobs[e][0],this.pipeline_jobs[e][1]);this.pipeline_yml.jobs=this.pipeline_jobs,this.pipeline_yml.resources=this.pipeline_resources,localStorage.setItem("pipeline_json",JSON.stringify(this.pipeline_yml))},pipeline_passed_check:function(e,r){var t=[],s=[],n=[];if(0==e)return"";if(null==r)t=this.pipeline_jobs[e-1].plan[0].aggregate,s=this.pipeline_jobs[e].plan[0].aggregate,this.pipeline_jobs[e-1].plan.length>2&&this.pipeline_jobs[e-1].plan.forEach(function(e,r){r>1&&n.push(e)});else if("before"==r){for(var i=0;i<this.pipeline_jobs[e-1].length;i++)"close"==this.pipeline_jobs[e-1][i].name&&(t=this.pipeline_jobs[e-1][i].plan[0].aggregate),this.pipeline_jobs[e-1][i].plan.length>2&&this.pipeline_jobs[e-1][i].plan.forEach(function(e,r){r>1&&n.push(e)});s=this.pipeline_jobs[e].plan[0].aggregate}else"after"==r&&(t=this.pipeline_jobs[e-1].plan[0].aggregate,this.pipeline_jobs[e-1].plan.length>2&&this.pipeline_jobs[e-1].plan.forEach(function(e,r){r>1&&n.push(e)}),s=[this.pipeline_jobs[e][0].plan[0].aggregate,this.pipeline_jobs[e][1].plan[0].aggregate]);t=t.concat(n);var a=[];if("after"==r)for(var o=0;o<s.length;o++){var p=[];s[o].forEach(function(e,r){t.forEach(function(t,s){e.resource!=t.resource&&e.resource!=t.put||p.push(r)})}),0==p.lengt&&(p=!0),p=p.slice().sort(function(e,r){return e-r}).reduce(function(e,r){return e.slice(-1)[0]!==r&&e.push(r),e},[]),a.push(p)}else s.forEach(function(e,r){t.forEach(function(t,s){e.resource!=t.resource&&e.resource!=t.put||a.push(r)})}),a=a.slice().sort(function(e,r){return e-r}).reduce(function(e,r){return e.slice(-1)[0]!==r&&e.push(r),e},[]);return a.length>0?a:""},job_mouseover:function(e){this.deleteIndex=e},job_mouseleave:function(e){this.deleteIndex=-1},delete_job:function(e){var r=this.pipeline_jobs[e],t=[],s=[];if(r.length>1)for(var n=0;n<r.length;n++)t=this.find_resource(r[n],t);else t=this.find_resource(r,t);t=t.reduce(function(e,r){return e.indexOf(r)<0&&e.push(r),e},[]);for(var i=0;i<this.pipeline_jobs.length;i++)if(i!=e)if(this.pipeline_jobs[i].length>1)for(var a=0;a<this.pipeline_jobs[i].length;a++)s=this.find_resource(this.pipeline_jobs[i][a],s);else s=this.find_resource(this.pipeline_jobs[i],s);s=s.reduce(function(e,r){return e.indexOf(r)<0&&e.push(r),e},[]);for(var o=[],p=0;p<t.length;p++)for(var c=0;c<s.length;c++)if(t[p]==s[c]){o.push(p);break}for(var l=o.length-1;l>=0;l--)t.splice(o[l],1);for(var u=0;u<t.length;u++)for(var _=0;_<this.pipeline_resources.length;_++)t[u]==this.pipeline_resources[_].name&&this.pipeline_resources.splice(_,1);this.passed_pipeline.splice(e,1),this.pipeline_jobs.splice(e,1),this.passed_reset(e),this.remove_resource_link(e)},find_resource:function(e,r){for(var t=r,s=0;s<e.plan.length;s++)if(0==s)e.plan[s].aggregate.forEach(function(e,r,s){null!=e.resource?t.push(e.resource):t.push(e.get)});else if(s>1){var n=e.plan[s];null!=n.resource?t.push(n.resource):t.push(n.put),null!=n.on_success&&t.push(n.on_success.put),null!=n.on_failure&&t.push(n.on_failure.put)}return t},remove_resource_link:function(e){if(null!=this.pipeline_jobs[e].name)for(var r=0;r<this.pipeline_jobs[e].plan[0].aggregate.length;r++)null!=this.pipeline_jobs[e].plan[0].aggregate[r].passed&&delete this.pipeline_jobs[e].plan[0].aggregate[r]["passed"],null!=this.pipeline_jobs[e].plan[0].aggregate[r].trigger&&(this.pipeline_jobs[e].plan[0].aggregate[r]["trigger"]=!1);else for(var t=0;t<this.pipeline_jobs[e].length;t++)for(var s=0;s<this.pipeline_jobs[e][t].plan[0].aggregate.length;s++)null!=this.pipeline_jobs[e][t].plan[0].aggregate[s].passed&&delete this.pipeline_jobs[e][t].plan[0].aggregate[s]["passed"],null!=this.pipeline_jobs[e][t].plan[0].aggregate[s].trigger&&(this.pipeline_jobs[e][t].plan[0].aggregate[s]["trigger"]=!1)},save_pass:function(e){if("number"==typeof this.passed_pipeline[e][0]){for(var r=0;r<this.passed_check.length;r++)if(1==this.passed_check[r]){var t=this.passed_pipeline[e][r];"number"==typeof this.passed_pipeline[e-1][0]||"string"==typeof this.passed_pipeline[e-1][0]?this.pipeline_jobs[e].plan[0].aggregate[t]["passed"]=[this.pipeline_jobs[e-1].name]:this.pipeline_jobs[e].plan[0].aggregate[t]["passed"]=["close"]}for(var s=0;s<this.trigger_check.length;s++)if(1==this.trigger_check[s]){t=this.passed_pipeline[e][s];this.pipeline_jobs[e].plan[0].aggregate[t]["trigger"]=!0}}else{var n=this;this.passed_check_double.forEach(function(r,t){r.forEach(function(r,s){if(1==r){var i=n.passed_pipeline[e][t][s];n.pipeline_jobs[e][t].plan[0].aggregate[i]["passed"]=[n.pipeline_jobs[e-1].name]}})}),this.trigger_check_double.forEach(function(r,t){r.forEach(function(r,s){if(1==r){var i=n.passed_pipeline[e][t][s];n.pipeline_jobs[e][t].plan[0].aggregate[i]["trigger"]=!0}})})}this.link_dialog=!1,this.passed_check=[],this.trigger_check=[],this.passed_check_double=[[],[]],this.trigger_check_double=[[],[]]},add_pipeline:function(){this.now_pipeline_save(),this.$router.push({name:"add_pipeline"})},add_resource:function(){this.now_pipeline_save(),this.$router.push({name:"add_resource"})},add_resource_delete:function(){this.add_resources=[],localStorage.setItem("add_resource_json",JSON.stringify(this.add_resources))}}}),S=x,O=(t("06c4"),Object(a["a"])(S,v,k,!1,null,null,null)),E=O.exports,$=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("b-form-textarea",{attrs:{id:"textarea",rows:"30",disabled:""},model:{value:e.data,callback:function(r){e.data=r},expression:"data"}})],1)},I=[],N={name:"export_pipeline",data:function(){return{data:""}},created:function(){this.data=this.$route.params.export_pipeline},methods:{}},T=N,P=Object(a["a"])(T,$,I,!1,null,null,null),M=P.exports,C=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("b-button",{attrs:{variant:"vue"==e.pipeline_type?"success":"outline-success"},on:{click:function(r){e.pipeline_type="vue"}}},[e._v("Vue")]),e._v(" \n\t"),t("b-button",{attrs:{variant:"maven"==e.pipeline_type?"success":"outline-success"},on:{click:function(r){e.pipeline_type="maven"}}},[e._v("Maven")]),e._v(" \n\t"),t("b-button",{attrs:{variant:"go"==e.pipeline_type?"success":"outline-success"},on:{click:function(r){e.pipeline_type="go"}}},[e._v("Go")]),e._v(" \n\t"),t("b-button",{attrs:{variant:"python"==e.pipeline_type?"success":"outline-success"},on:{click:function(r){e.pipeline_type="python"}}},[e._v("Python")]),t("br"),t("br"),e._l(e.show_data,function(r,s){return t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],key:s,staticStyle:{"margin-right":"15px"},attrs:{variant:"success"},on:{click:function(r){return e.job_name_setting(s)}}},[e._v("\n\t\t"+e._s("object"==typeof r[0]?"Roll-back&close":r.name)+"\n\t")])}),t("b-modal",{attrs:{title:"Job Name Setting","hide-footer":""},model:{value:e.name_setting_dialog,callback:function(r){e.name_setting_dialog=r},expression:"name_setting_dialog"}},[t("h3",[e._v("Job Name")]),t("b-form-input",{model:{value:e.job_name,callback:function(r){e.job_name=r},expression:"job_name"}}),t("b-button",{staticClass:"mt-2",attrs:{variant:"outline-success",block:""},on:{click:e.name_ok}},[e._v("OK")])],1),t("b-modal",{attrs:{title:"Resource Name Setting","hide-footer":""},model:{value:e.resource_setting_dialog,callback:function(r){e.resource_setting_dialog=r},expression:"resource_setting_dialog"}},[e._l(e.need_resource,function(r,s){return t("div",{key:s},[t("h3",[e._v(e._s(r))]),t("b-form-input",{model:{value:e.resrouce_names[s],callback:function(r){e.$set(e.resrouce_names,s,r)},expression:"resrouce_names[index]"}})],1)}),t("b-button",{staticClass:"mt-2",attrs:{variant:"outline-success",block:""},on:{click:e.resource_check}},[e._v("OK")])],2)],2)},J=[],A=t("3488"),G=t("24d8"),R=t("ea7c"),D=t("3139"),L={name:"show_pipeline",data:function(){return{pipeline_type:"vue",show_data:"",show_resource:"",vue_pipeline_job:A,vue_pipeline_resource:G,maven_pipeline_job:R,maven_pipeline_resource:D,need_resource:[],resrouce_names:[],send_data:"",now_index:"",job_name:"",name_setting_dialog:!1,resource_setting_dialog:!1}},created:function(){this.show_data=this.vue_pipeline_job,this.show_resource=this.vue_pipeline_resource,console.log(this.vue_pipeline_job),console.log(this.show_data)},watch:{pipeline_type:function(){"vue"==this.pipeline_type?(this.show_data=this.vue_pipeline_job,this.show_resource=this.vue_pipeline_resource):"maven"==this.pipeline_type?(console.log("rrrr"),this.show_data=this.maven_pipeline_job,this.show_resource=this.maven_pipeline_resource):(this.show_data="",this.show_resource="")}},methods:{job_name_setting:function(e){this.now_index=e,this.name_setting_dialog=!0},resource_setting:function(e){if(this.need_resource=[],"object"==Object(y["a"])(e[0]))for(var r=0;r<e.length;r++)for(var t=e[r],s=0;s<t.plan.length;s++)if(0==s)for(var n=0;n<t.plan[0].aggregate.length;n++)this.need_resource.push(t.plan[0].aggregate[n].resource);else s>1&&(null!=t.plan[s].resource?this.need_resource.push(t.plan[s].resource):this.need_resource.push(t.plan[s].put),null!=t.plan[s].on_success&&this.need_resource.push(t.plan[s].on_success.put),null!=t.plan[s].on_failure&&this.need_resource.push(t.plan[s].on_failure.put));else for(var i=0;i<e.plan.length;i++)if(0==i)for(var a=0;a<e.plan[0].aggregate.length;a++)this.need_resource.push(e.plan[0].aggregate[a].resource);else i>1&&(null!=e.plan[i].resource?this.need_resource.push(e.plan[i].resource):this.need_resource.push(e.plan[i].put),null!=e.plan[i].on_success&&this.need_resource.push(e.plan[i].on_success.put),null!=e.plan[i].on_failure&&this.need_resource.push(e.plan[i].on_failure.put));this.need_resource=this.need_resource.reduce(function(e,r){return e.indexOf(r)<0&&e.push(r),e},[]),this.resource_setting_dialog=!0},name_ok:function(){this.send_data=JSON.parse(JSON.stringify(this.show_data[this.now_index])),"object"==Object(y["a"])(this.send_data[0])?(this.send_data[0].name=this.job_name+"_roleback",this.send_data[1].name=this.job_name+"_close"):this.send_data.name=this.job_name,this.resource_setting(this.send_data)},resource_check:function(){for(var e=0;e<this.resrouce_names.length;e++)for(var r=e+1;r<this.resrouce_names.length;r++)if(this.resrouce_names[e]==this.resrouce_names[r])return alert("resource name에 중복되는 값이 있습니다"),!1;this.resource_ok()},resource_ok:function(){var e=this,r=JSON.parse(JSON.stringify(this.send_data)),t=JSON.parse(JSON.stringify(this.show_resource)),s=this;if("object"==Object(y["a"])(r[0]))for(var n=0;n<r.length;n++){for(var i=r[n],a=function(r){if(0==r)for(var t=function(r){e.need_resource.forEach(function(e,t){i.plan[0].aggregate[r].resource==e&&(i.plan[0].aggregate[r].resource=s.resrouce_names[t])})},n=0;n<i.plan[0].aggregate.length;n++)t(n);else 1==r?(null!=i.plan[r].on_failure&&e.need_resource.forEach(function(e,t){i.plan[r].on_failure.put==e&&(i.plan[r].on_failure.put=s.resrouce_names[t])}),null!=i.plan[r].on_success&&e.need_resource.forEach(function(e,t){i.plan[r].on_success.put==e&&(i.plan[r].on_success.put=s.resrouce_names[t])})):r>1&&(null!=i.plan[r].resource?e.need_resource.forEach(function(e,t){i.plan[r].resource==e&&(i.plan[r].resource=s.resrouce_names[t])}):e.need_resource.forEach(function(e,t){i.plan[r].put==e&&(i.plan[r].put=s.resrouce_names[t])}),null!=i.plan[r].on_success&&e.need_resource.forEach(function(e,t){i.plan[r].on_success.put==e&&(i.plan[r].on_success.put=s.resrouce_names[t])}),null!=i.plan[r].on_failure&&e.need_resource.forEach(function(e,t){i.plan[r].on_failure.put==e&&(i.plan[r].on_failure.put=s.resrouce_names[t])}))},o=0;o<i.plan.length;o++)a(o);r[n]=i}else{var p=function(t){if(0==t)for(var n=function(t){e.need_resource.forEach(function(e,n){r.plan[0].aggregate[t].resource==e&&(r.plan[0].aggregate[t].resource=s.resrouce_names[n])})},i=0;i<r.plan[0].aggregate.length;i++)n(i);else 1==t?(null!=r.plan[t].on_failure&&e.need_resource.forEach(function(e,n){r.plan[t].on_failure.put==e&&(r.plan[t].on_failure.put=s.resrouce_names[n])}),null!=r.plan[t].on_success&&e.need_resource.forEach(function(e,n){r.plan[t].on_success.put==e&&(r.plan[t].on_success.put=s.resrouce_names[n])})):t>1&&(null!=r.plan[t].resource?e.need_resource.forEach(function(e,n){r.plan[t].resource==e&&(r.plan[t].resource=s.resrouce_names[n])}):e.need_resource.forEach(function(e,n){r.plan[t].put==e&&(r.plan[t].put=s.resrouce_names[n])}),null!=r.plan[t].on_success&&e.need_resource.forEach(function(e,n){r.plan[t].on_success.put==e&&(r.plan[t].on_success.put=s.resrouce_names[n])}),null!=r.plan[t].on_failure&&e.need_resource.forEach(function(e,n){r.plan[t].on_failure.put==e&&(r.plan[t].on_failure.put=s.resrouce_names[n])}))};for(o=0;o<r.plan.length;o++)p(o)}var c=[],l=function(r){e.need_resource.forEach(function(e,n){console.log(t[r].name+" === "+e),t[r].name==e&&(t[r].name=s.resrouce_names[n],c.push(t[r]))})};for(o=0;o<t.length;o++)l(o);console.log(c);var u={job:r,resources:c};this.need_resource=[],this.temp_resource="",r="",this.$router.push({name:"pipeline_mgmt",params:{add_data:u}})}}},z=L,U=Object(a["a"])(z,C,J,!1,null,null,null),F=U.exports,H=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("b-button",{attrs:{variant:"vue"==e.pipeline_type?"success":"outline-success"},on:{click:function(r){e.pipeline_type="vue"}}},[e._v("Vue")]),e._v(" \n\t"),t("b-button",{attrs:{variant:"maven"==e.pipeline_type?"success":"outline-success"},on:{click:function(r){e.pipeline_type="maven"}}},[e._v("Maven")]),e._v(" \n\t"),t("b-button",{attrs:{variant:"go"==e.pipeline_type?"success":"outline-success"},on:{click:function(r){e.pipeline_type="go"}}},[e._v("Go")]),e._v(" \n\t"),t("b-button",{attrs:{variant:"python"==e.pipeline_type?"success":"outline-success"},on:{click:function(r){e.pipeline_type="python"}}},[e._v("Python")]),t("br"),t("br"),e._l(e.show_resource,function(r,s){return t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],key:s,staticStyle:{"margin-right":"15px"},attrs:{variant:"success"},on:{click:function(r){return e.job_name_setting(s)}}},[e._v("\n\t\t"+e._s(r.name)+"\n\t")])}),t("b-modal",{attrs:{title:"Job Name Setting","hide-footer":""},model:{value:e.name_setting_dialog,callback:function(r){e.name_setting_dialog=r},expression:"name_setting_dialog"}},[t("h3",[e._v("Resource Name")]),t("b-form-input",{model:{value:e.resource_name,callback:function(r){e.resource_name=r},expression:"resource_name"}}),t("b-button",{staticClass:"mt-2",attrs:{variant:"outline-success",block:""},on:{click:e.resource_ok}},[e._v("OK")])],1)],2)},K=[],B=t("8345"),V=t("6a11"),Y={name:"show_pipeline",data:function(){return{pipeline_type:"vue",show_resource:"",vue_pipeline_resource:B,maven_pipeline_resource:V,send_data:"",now_index:"",resource_name:"",name_setting_dialog:!1}},created:function(){this.show_resource=this.vue_pipeline_resource},watch:{pipeline_type:function(){"vue"==this.pipeline_type?this.show_resource=this.vue_pipeline_resource:"maven"==this.pipeline_type?this.show_resource=this.maven_pipeline_resource:this.show_resource=""}},methods:{job_name_setting:function(e){this.now_index=e,this.resource_name="",this.name_setting_dialog=!0},resource_ok:function(e){var r=JSON.parse(JSON.stringify(this.show_resource[this.now_index]));console.log(r),r.name=this.resource_name,this.$router.push({name:"pipeline_mgmt",params:{send_resource:r}})}}},X=Y,W=Object(a["a"])(X,H,K,!1,null,null,null),q=W.exports,Q=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("v-list",{attrs:{"two-line":""}},[e._l(e.items,function(r,s){return[r.header?t("v-subheader",{key:r.header},[e._v("\n            "+e._s(r.header)+"\n          ")]):r.divider?t("v-divider",{key:s,attrs:{inset:r.inset}}):t("v-list-tile",{key:r.title,attrs:{avatar:""},on:{click:function(e){}}},[t("v-list-tile-content",[t("v-list-tile-title",{domProps:{innerHTML:e._s(r.name)}}),e._l(r.jobs,function(r){return t("v-list-tile-sub-title",{domProps:{innerHTML:e._s(r.name)}})})],2)],1)]})],2)],1)},Z=[],ee={name:"show_pipeline",data:function(){return{items:[]}},created:function(){this.items=JSON.parse(localStorage.getItem("pipeline_deck")||"[]"),console.log(this.items)},methods:{}},re=ee,te=Object(a["a"])(re,Q,Z,!1,null,null,null),se=te.exports;s["default"].use(l["a"]);var ne=new l["a"]({mode:"history",base:"/",routes:[{path:"/",name:"pipeline_input",component:b},{path:"/pipeline_mgmt",name:"pipeline_mgmt",component:E},{path:"/export_pipeline",name:"export_pipeline",component:M},{path:"/add_pipeline",name:"add_pipeline",component:F},{path:"/add_resource",name:"add_resource",component:q},{path:"/show_pipeline",name:"show_pipeline",component:se}]}),ie=t("2f62");s["default"].use(ie["a"]);var ae=new ie["a"].Store({state:{},mutations:{},actions:{}}),oe=t("bc3a"),pe=t.n(oe),ce=t("5f5b");t("ab8b"),t("2dd8");s["default"].use(ce["a"]),s["default"].config.productionTip=!1,s["default"].prototype.$http=pe.a,new s["default"]({router:ne,store:ae,render:function(e){return e(c)}}).$mount("#app")},"64a9":function(e,r,t){},"6a11":function(e){e.exports=[{name:"fail_api",type:"http-api",source:{uri:"((fail_callback_uri_temp))&job=deploy-develop",method:"POST"},check_every:"10s"},{name:"success_api",type:"http-api",source:{uri:"((success_callback_uri_temp))&job=stg-merge",method:"POST"},check_every:"10s"},{name:"repo",type:"git",source:{uri:"((repo_uri_temp))",branch:"((repo_branch_temp))",private_key:"((git_private_key))"},check_every:"10s"},{name:"target_repo",type:"git",source:{uri:"((repo_uri_temp))",branch:"((repo_branch_temp))",private_key:"((git_private_key))"},check_every:"10s"},{name:"cf_api",type:"cf",source:{api:"((cf_api_temp))",username:"((cf_username))",password:"((cf_password))",organization:"((cf_org_temp))",space:"((cf_space_temp))",skip_cert_check:!0,check_every:"10s"}},{name:"mvnw",type:"git",source:{uri:"((mvnw_git_url_temp))",branch:"master",private_key:"((git_private_key_temp))"},check_every:"10s"},{name:"m2",type:"docker-image",source:{repository:"making/m2"},check_every:"10s"},{name:"docker-registry",type:"docker-image",source:{repository:"((docker_harbor_repo))/((image_project_dev))/((wrapper_group_name))-((wrapper_project_code_lower))",tag:"((ticket_version))",insecure_registries:"((insecure_registries))",username:"((docker_harbor_username))",password:"((docker_harbor_password))"}},{name:"cf-delete",type:"cf-cli-resource",source:{api:"((cf_api_temp))",username:"((cf_username))",password:"((cf_password))",org:"((cf_org_temp))",space:"((cf_space_temp))"}}]},8345:function(e){e.exports=[{name:"repo",type:"git",source:{uri:"((repo_uri_temp))",branch:"((repo_branch_temp))",private_key:"((git_private_key))"},check_every:"10s",params:["repository"]},{name:"fail_api",type:"http-api",source:{uri:"((fail_callback_uri_temp))&job=deploy-develop",method:"POST"},check_every:"10s"},{name:"success_api",type:"http-api",source:{uri:"((success_callback_uri_temp))&job=deploy-develop",method:"POST"},check_every:"10s"},{name:"cf_api",type:"cf",source:{api:"((cf_api_temp))",username:"((cf_username))",password:"((cf_password))",organization:"((cf_org_temp))",space:"((cf_space_temp))",skip_cert_check:!0,check_every:"10s"},params:["manifest","current_app_name"]},{name:"docker_registry",type:"docker-image",source:{repository:"((docker_harbor_repo))/((image_project_temp))/((wrapper_group_name))-((wrapper_project_code_lower))",tag:"((ticket_version))",insecure_registries:"((insecure_registries))",username:"((docker_harbor_username))",password:"((docker_harbor_password))",check_every:"10s"},params:["build"]},{name:"cf-delete",type:"cf-cli-resource",source:{api:"((cf_api_temp))",username:"((cf_username))",password:"((cf_password))",org:"((cf_org_temp))",space:"((cf_space_temp))",cf_dial_timeout:10},params:["command","app_name","delete_mapped_routes"]}]},ea7c:function(e){e.exports=[{name:"test",serial:!0,public:!0,plan:[{aggregate:[{get:"repo",resource:"repo"},{get:"m2",resource:"m2"},{get:"mvnw",resource:"mvnw"}]},{task:"unit",config:{platform:"linux",image_resource:{type:"docker-image",source:{repository:"java",tag:"8-jdk-alpine"}},inputs:[{name:"repo"},{name:"m2"},{name:"mvnw"}],params:{nexus_id:"((nexus_id))",nexus_pwd:"((nexus_pw))"},run:{path:"/bin/sh",args:["-c",'cp -a mvnw/* ./repo/\ncp -a mvnw/.mvn ./repo/\ncd repo\ncat << EOF >> settings.xml\n<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"\n xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0\n https://maven.apache.org/xsd/settings-1.0.0.xsd">\n <servers>\n <server>\n <id>nexus</id>\n <username>$nexus_id</username>\n <password>$nexus_pw</password>\n </server>\n <server>\n <id>nexus-snapshots</id>\n <username>$nexus_id</username>\n <password>$nexus_pw</password>\n </server>\n </servers>\n <mirrors>\n <mirror>\n <id>central</id>\n <url>http://lib.mzdev.kr/repository/maven-central/</url>\n <mirrorOf>central</mirrorOf>\n </mirror>\n </mirrors>\n <profiles>\n <profile>\n <id>nexus</id>\n <repositories>\n <repository>\n <id>devops</id>\n <url>http://lib.mzdev.kr/repository/devops-public/</url>\n </repository>\n </repositories>\n </profile>\n </profiles>\n\n <activeProfiles>\n <activeProfile>nexus</activeProfile>\n </activeProfiles>\n</settings>\nEOF\n./mvnw --settings settings.xml test -Dmaven.test.skip=true -Dmaven.repo.local=../m2/rootfs/opt/m2\n']}},on_failure:{put:"fail_api"}}]},{name:"build-img",serial:!0,public:!0,plan:[{aggregate:[{get:"m2",resource:"m2"},{get:"mvnw",resource:"mvnw"},{get:"repo",resource:"repo"}]},{task:"build-img",config:{platform:"linux",image_resource:{type:"docker-image",source:{repository:"java",tag:"8-jdk-alpine"}},inputs:[{name:"repo"},{name:"m2"},{name:"mvnw"}],outputs:[{name:"output"}],params:{group:"((wrapper_group_name))",repo:"repo",code:"((wrapper_project_code))",version:"((ticket_version))",nexus_id:"((nexus_id))",nexus_pw:"((nexus_pw))"},run:{path:"/bin/sh",args:["-c",'cp -a mvnw/* ./$repo/\ncp -a mvnw/.mvn ./$repo/\ncd $repo\ncat << EOF >> settings.xml\n<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"\n xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0\n https://maven.apache.org/xsd/settings-1.0.0.xsd">\n <servers>\n <server>\n <id>nexus</id>\n <username>$nexus_id</username>\n <password>$nexus_pw</password>\n </server>\n <server>\n <id>nexus-snapshots</id>\n <username>$nexus_id</username>\n <password>$nexus_pw</password>\n </server>\n </servers>\n <mirrors>\n <mirror>\n <id>central</id>\n <url>http://lib.mzdev.kr/repository/maven-central/</url>\n <mirrorOf>central</mirrorOf>\n </mirror>\n </mirrors>\n <profiles>\n <profile>\n <id>nexus</id>\n <repositories>\n <repository>\n <id>devops</id>\n <url>http://lib.mzdev.kr/repository/devops-public/</url>\n </repository>\n </repositories>\n </profile>\n </profiles>\n\n <activeProfiles>\n <activeProfile>nexus</activeProfile>\n </activeProfiles>\n</settings>\nEOF\n./mvnw --settings settings.xml install -Dmaven.test.skip=true -Dmaven.repo.local=../m2/rootfs/opt/m2\nmv target/*.jar ../output/app.jar\ncp Dockerfile ../output/Dockerfile\nls -al ../output\n']}},on_failure:{put:"fail_api"}},{put:"docker_registry",params:{build:"output/"},on_failure:{put:"fail_api"}}]},{name:"deploy",serial:!0,public:!1,plan:[{aggregate:[{get:"docker-registry",resource:"docker-registry"},{get:"repo",resource:"repo"}]},{task:"make-manifest",config:{platform:"linux",inputs:[{name:"from",path:"repo"}],outputs:[{name:"out"}],image_resource:{type:"docker-image",source:{repository:"getourneau/alpine-bash-git"}},run:{path:"/bin/bash",args:["-c","cd repo\ncat manifest.yml\ncat manifest.yml | sed 's/IMAGE_PROJECT/'\"$image_project\"'/g' \\\n| sed 's/IMAGE_NAME/'\"$image_name\"'/g' \\\n| sed 's/IMAGE_TAG/'\"$image_tag\"'/g' \\\n| sed 's/RUNTIME_OPTIONS/'\"$runtime_options\"'/g' > manifest_new.yml\ncat manifest_new.yml\nmv manifest_new.yml ../out/manifest.yml\n"]}},input_mapping:{from:"repo"},params:{image_project:"((image_project_dev))",image_name:"((wrapper_group_name))-((wrapper_project_code_lower))",image_tag:"((ticket_version))",runtime_options:"((java_opts_dev))"}},{put:"cf-api",params:{manifest:"out/manifest.yml",current_app_name:"((wrapper_group_name))-((wrapper_ticket_number))"},on_success:{put:"success_api"},on_failure:{put:"fail_api"}}]},{name:"pipeline-pause",serial:!0,public:!0,plan:[{aggregate:[{get:"cf_api",resource:"cf_api"},{get:"repo",resource:"repo"}]}]},{name:"merge-to-git",public:!0,plan:[{aggregate:[{get:"repo",resource:"repo"},{get:"repo-release",resource:"target_repo"}]},{task:"merge-to-git",config:{platform:"linux",image_resource:{type:"docker-image",source:{repository:"getourneau/alpine-bash-git"}},inputs:[{name:"from",path:"repo"},{name:"to",path:"repo-target"}],outputs:[{name:"out"}],run:{path:"/bin/bash",args:["-c",'if [ "$DEBUG" = "true" ]; then\nset -x\nfi\ngit config --global user.email "${GIT_EMAIL}"\ngit config --global user.name "${GIT_NAME}"\ncd out\nshopt -s dotglob\nrm -rf *\nmv -f ../repo/* ./\nGIT_SSH_COMMAND="ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no" git remote add -f repo-target ../repo-target\ngit merge -s ours "repo-target/release" -m "$group-$code-$version merge to release"\n']}},input_mapping:{from:"repo",to:"repo-release"},params:{GIT_EMAIL:"((git_email))",GIT_NAME:"((git_name))",group:"((wrapper_group_name))",code:"((wrapper_project_code))",version:"((ticket_version))"}},{put:"repo",resource:"target_repo",params:{repository:"out"},on_failure:{put:"fail_api"}}]},[{name:"roll-back",serial:!0,public:!0,plan:[{aggregate:[{get:"repo",resource:"target_repo"},{get:"docker-registry-rollback",resource:"docker_registry_rollback"}]},{task:"make-manifest",config:{platform:"linux",inputs:[{name:"from",path:"target_repo"}],outputs:[{name:"out"}],image_resource:{type:"docker-image",source:{repository:"getourneau/alpine-bash-git"}},run:{path:"/bin/bash",args:["-c","cd $git_directory\ncat manifest.yml\ncat manifest.yml | sed 's/IMAGE_PROJECT/'\"$image_project\"'/g' \\\n| sed 's/IMAGE_NAME/'\"$image_name\"'/g' \\\n| sed 's/IMAGE_TAG/'\"$image_tag\"'/g' \\\n| sed 's/RUNTIME_OPTIONS/'\"$runtime_options\"'/g' > manifest_new.yml\ncat manifest_new.yml\nmv manifest_new.yml ../out/manifest.yml\n"]}},input_mapping:{from:"target_repo"},params:{git_directory:"target_repo",image_project:"((image_project_rel))",image_name:"((wrapper_group_name))-((wrapper_project_code_lower))",image_tag:"((rollback_ticket_version))",runtime_options:"((java_opts_prd))"}},{put:"cf-api",params:{manifest:"out/manifest.yml",current_app_name:"((wrapper_group_name))-((wrapper_project_code))"},on_success:{put:"success_api"},on_failure:{put:"fail_api"}}]},{name:"close",serial:!0,public:!0,plan:[{aggregate:[{get:"repo",resource:"target_repo"},{get:"cf-api",resource:"cf-api"}]}]}]]}});
//# sourceMappingURL=app.1ca87a4a.js.map